generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model platform_setting {
  id            Int     @id @default(autoincrement())
  default_image String? @db.VarChar(200)

  @@ignore
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model engine {
  id                  Int     @id @default(autoincrement())
  engine_name         String  @db.VarChar(50)
  engine_description  String? @db.VarChar(1000)
  engine_image        String  @db.VarChar(200)
  state               Int     @default(1) @db.UnsignedTinyInt
  engine_profile_name String? @db.VarChar(50)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model experiment {
  id              Int       @id @default(autoincrement())
  creator         Int?
  experiment_name String?   @db.VarChar(100)
  create_time     DateTime? @default(now()) @db.DateTime(0)
  available       Int?      @default(1) @db.UnsignedTinyInt
  description     String?   @db.Text
  nano_id         String?   @unique(map: "psy_experiment_nano_id_uindex") @db.VarChar(16)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model experiment_setting {
  id            Int     @id @unique(map: "psy_experiment_setting_id_uindex") @default(autoincrement())
  experiment_id Int?
  setting       Json?
  intro         String? @db.LongText
  engine_id     Int?
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model map_user_group {
  id       Int  @id @default(autoincrement())
  user_id  Int? @unique(map: "psy_map_user_group_user_id_uindex")
  group_id Int?

  @@index([group_id], map: "idx_group_id")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model trail {
  id                 Int       @id @default(autoincrement())
  user_experiment_id String?   @db.VarChar(16)
  user_id            Int?
  prompt             String?   @db.VarChar(1000)
  state              String?   @db.VarChar(15)
  create_time        DateTime? @default(now()) @db.DateTime(0)
  engine_id          Int?
  image_url          String?   @db.VarChar(200)
  update_time        DateTime? @db.DateTime(0)
  nano_id            String?   @unique(map: "psy_trail_nano_id_uindex") @db.VarChar(16)

  @@index([user_experiment_id], map: "idx_exp_nano_id")
  @@index([state], map: "idx_state")
  @@index([user_id], map: "idx_user_id")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model user {
  id            Int      @id @default(autoincrement())
  username      String?  @db.VarChar(50)
  password      String?  @db.VarChar(50)
  email         String?  @db.VarChar(50)
  tel           String?  @db.VarChar(15)
  avatar        String?  @db.VarChar(100)
  user_role     String?  @db.VarChar(15)
  create_time   DateTime @default(now()) @db.DateTime(0)
  salt          String?  @db.VarChar(32)
  user_group_id BigInt?
  qualtrics     String?  @db.VarChar(50)
  nano_id       String?  @unique(map: "psy_user_nano_id_uindex") @db.VarChar(16)

  @@index([email], map: "idx_email")
  @@index([username], map: "idx_username")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model user_experiments {
  id            Int       @id @unique(map: "psy_user_experiments_id_uindex") @default(autoincrement())
  user_id       Int?
  nano_id       String?   @unique(map: "psy_user_experiments_nano_id_uindex") @db.VarChar(16)
  experiment_id String?   @db.VarChar(16)
  type          String?   @default("TRAIL") @db.VarChar(30)
  engine_id     Int?
  start_time    DateTime? @default(now()) @db.DateTime(0)
  finish_time   DateTime? @db.DateTime(0)

  @@index([user_id], map: "idx_user_id")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model user_group {
  id            Int     @id @default(autoincrement())
  group_name    String? @db.VarChar(50)
  experiment_id Int?
  state         Int?    @default(1) @db.UnsignedTinyInt
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model user_setting {
  id        Int  @id @default(autoincrement())
  user_id   Int? @unique(map: "psy_user_setting_user_id_uindex")
  engine_id Int?

  @@index([engine_id], map: "idx_engine_id")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model experiment_steps {
  id            Int     @id @default(autoincrement())
  experiment_id Int?
  order         Int?
  type          Int?
  title         String? @db.VarChar(50)
  content       Json?
}
